#!/bin/sh
DIR=$HOME/.local/share/bg
WALL=$(fd . --base-directory "$DIR" -e jpg -e png -e jpeg -e gif | dmenu -l 5 -p "Choose wall: ")
[ -z "$WALL" ] && OPTS="" || OPTS=$(printf "Preview\nSet As Wall\n" | dmenu -l 2 -p "Action: ")

confirm () {
    CHOICE=$(printf "Yes\nNo" | dmenu -l 2 -p "Set as wall?")
    case $CHOICE in
        "Yes") setwallp "$DIR"/"$WALL";;
        "No") wallsetter;;
    esac
}

case $OPTS in
    "Set As Wall") setwallp "$DIR"/"$WALL";;
    "Preview") sxiv "$DIR"/"$WALL" && confirm;;
    *) exit 1;;
esac
