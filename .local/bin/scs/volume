#!/bin/sh

case $BUTTON in
    1) setsid -f st -e pulsemixer;;
esac

volstat="$(pactl list sinks)"
# volstat="$(amixer get Master)" # ALSA only equivalent.

# echo "$volstat" | grep -q "Mute: yes" && printf "ğŸ”‡\\n" && exit
echo "$volstat" | grep -q "Mute: yes" && printf "ïª€\\n" && exit

vol="$(echo "$volstat" | grep '[0-9]\+%' | sed "s,.* \([0-9]\+\)%.*,\1,;1q")"

icon="ï€"

 if [ "$vol" -gt "70" ]; then
 	icon="ï€¨"
 elif [ "$vol" -lt "30" ]; then
 	icon="ï€¦"
 else
 	icon="ï€§"
 fi

printf "%s %s%%\\n" "$icon" "$vol"
